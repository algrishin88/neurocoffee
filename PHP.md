# Запуск проекта на PHP

Страницы сайта представлены в виде **PHP-файлов** (например, `index.php`, `login.php`, `menubeta.php`). API по-прежнему работает на **Node.js** (Express).

## Варианты запуска

### 1. Хостинг с PHP (Apache/Nginx)

- Загрузите проект на хостинг с поддержкой PHP.
- Убедитесь, что по умолчанию открывается `index.php` (в Apache для этого подходит файл `.htaccess` в корне).
- **API**: запустите Node-сервер отдельно (другой порт или поддомен) и в настройках фронта укажите базовый URL API (например, через `window.NEURO_CAFE_API_URL` в `js/api.js` или переменную окружения), либо настройте проксирование запросов с пути `/api` на Node-сервер.

### 2. Локальная разработка с PHP

```bash
# Терминал 1: Node API (порт 3000 или из .env)
node server.js

# Терминал 2: встроенный PHP-сервер (порт 8080)
php -S localhost:8080
```

Откройте в браузере: `http://localhost:8080` — отдаётся `index.php`. Запросы к `/api` с фронта должны уходить на Node (например, на порт 3000). Для этого в корне можно задать переменную или в `js/api.js` указать `const API_BASE_URL = 'http://localhost:3000/api'` для разработки.

### 3. Только Node (без PHP)

Если PHP не используется, можно оставить только HTML-страницы: в проекте по-прежнему есть файлы `index.html`, `login.html` и т.д. Тогда раздача статики через Express и без PHP всё будет работать как раньше.

## Список PHP-страниц

| Файл         | Назначение              |
|-------------|--------------------------|
| index.php    | Главная                  |
| menubeta.php | Меню                     |
| services.php | О нас                    |
| contact.php  | Контакты                 |
| requisites.php | Реквизиты              |
| login.php    | Вход                     |
| register.php | Регистрация             |
| profile.php  | Профиль                  |
| admin.php    | Админ-панель             |
| redirect.php | Callback после входа через Яндекс ID |
| login-qr.php | Вход по QR-коду          |
| order-success.php | Страница после оплаты заказа |
| 404.php      | Страница «Не найдено»    |

## Редиректы в API (Node)

В бэкенде уже настроены редиректы на `.php`:

- После оплаты заказа: `order-success.php?orderId=...`
- Ссылка для QR-входа: `login-qr.php?code=...`

При смене домена или схемы (http/https) проверьте переменные окружения (например, `BASE_URL` для платежей и `baseUrl` для QR).

## Яндекс OAuth

Если используется вход через Яндекс ID, в настройках приложения Яндекс OAuth укажите в качестве Callback URL страницу, на которую возвращается пользователь (например, `https://ваш-домен.ru/redirect.php`).
